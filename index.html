<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xin Qu·∫ª ƒê·ªãnh M·ªánh 10/5 ‚Äì Supreme Audio++</title>

<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{
  --red:#c0392b;
  --gold:#ffd700;
  --paper:#fff5e6;
  --wood1:#6d4c41;
  --wood2:#3e2723;
}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at top,#fff7ed,#e8d5c3);
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
}
body.night{
  background:radial-gradient(circle at top,#2b1b1b,#120a0a);
}
.panel-outer{
  background:linear-gradient(145deg,var(--wood1),var(--wood2));
  padding:18px;
  border-radius:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.4);
}
.panel{
  background:var(--paper);
  border-radius:14px;
  padding:16px;
  max-width:420px;
  width:92vw;
  box-shadow:inset 0 0 0 5px #3e2723;
}
h1{
  text-align:center;
  color:var(--red);
  margin:6px 0 2px;
}
.sub{
  text-align:center;
  font-size:.9rem;
  color:#5a4038;
}
.tube-wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  margin:18px 0;
}
.tube{
  width:120px;
  height:160px;
  background:linear-gradient(#4e342e,#2d1b16);
  border-radius:14px;
  box-shadow:0 8px 18px rgba(0,0,0,.4);
}
.energy{
  width:80%;
  height:8px;
  background:#ddd;
  border-radius:99px;
  overflow:hidden;
  margin-top:10px;
}
.energy-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--gold),#ffec8b);
  transition:width .3s;
}
.cards{
  position:relative;
  height:140px;
  margin:10px 0;
}
.card{
  width:70px;
  height:110px;
  background:linear-gradient(#fff,#f6eadc);
  border-radius:6px;
  position:absolute;
  left:50%;
  top:20px;
  transform-origin:bottom center;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:var(--red);
  box-shadow:0 6px 12px rgba(0,0,0,.2);
}
.controls{
  display:flex;
  gap:8px;
  justify-content:center;
  flex-wrap:wrap;
}
button{
  padding:10px 14px;
  border:none;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
}
.primary{
  background:linear-gradient(var(--red),#9e2a24);
  color:#fff;
}
.secondary{
  background:linear-gradient(var(--gold),#e6c200);
}
button:disabled{
  opacity:.5;
}
.result{
  margin-top:12px;
  padding:12px;
  border-radius:12px;
  background:#fffdf7;
  min-height:100px;
}
.vip{
  background:
    radial-gradient(circle,#fff6b0,#ffd700);
  animation:aura 1.5s infinite alternate;
}
@keyframes aura{
  from{box-shadow:0 0 12px gold;}
  to{box-shadow:0 0 28px gold;}
}
.notice{
  margin-top:8px;
  padding:10px;
  background:linear-gradient(90deg,#fff3c4,#ffe08a);
  border-radius:10px;
  font-weight:800;
  text-align:center;
}
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99;
}
.modal-box{
  background:var(--paper);
  padding:18px;
  border-radius:14px;
  width:90%;
  max-width:360px;
}
.modal-box h3{margin-top:0}
input[type=date]{
  width:100%;
  padding:8px;
  margin:6px 0;
}
</style>
</head>
<body>

<div class="panel-outer">
<div class="panel">

<h1>üîÆ XIN QU·∫∫ ƒê·ªäNH M·ªÜNH</h1>
<div class="sub">H·ªôi tr·∫°i l·ªõp 10/5 ¬∑ Supreme Audio++</div>

<div class="tube-wrap">
  <div id="tube" class="tube"></div>
  <div class="energy"><div id="energyFill" class="energy-fill"></div></div>
</div>

<div id="cards" class="cards"></div>

<div class="controls">
  <button id="startBtn" class="primary">B·∫ÆT ƒê·∫¶U</button>
  <button id="shakeBtn" class="secondary" disabled>L·∫ÆC ·ªêNG</button>
  <button id="drawBtn" class="secondary" disabled>R√öT QU·∫∫</button>
</div>

<div id="result" class="result">
  <b>Tr·∫°ng th√°i:</b> Ch∆∞a r√∫t qu·∫ª
</div>

</div>
</div>

<!-- MODALS -->
<div id="m1" class="modal" style="display:none">
  <div class="modal-box">
    <h3>B·∫°n c√≥ tin ƒë·ªãnh m·ªánh?</h3>
    <button onclick="nextModal()">T√¥i tin</button>
  </div>
</div>

<div id="m2" class="modal" style="display:none">
  <div class="modal-box">
    <h3>B·∫°n ƒë√£ s·∫µn s√†ng?</h3>
    <input type="date" id="dob">
    <button onclick="unlock()">S·∫µn s√†ng</button>
  </div>
</div>

<script>
/* ===== AUTO NIGHT MODE ===== */
if(new Date().getHours()>=18){document.body.classList.add('night')}

/* ===== DATA ===== */
const STORAGE="QUE_105";
const VIP="2010-06-25";

/* 70 QU·∫∫ */
const fortunes=[...Array(70)].map((_,i)=>({
  title:["ƒê·∫°i C√°t","L·ªôc ƒÇn","H·∫°n Th·ªã Phi","S√¢n Si ƒê·ªô","Ph√∫c L·ªôc","Ti·ªÉu Hung"][i%6],
  text:`Qu·∫ª s·ªë ${i+1}: ${[
    "H√£y gh√© qu·∫ßy 10/5 mua n∆∞·ªõc ƒë·ªÉ k√≠ch v·∫≠n may.",
    "U·ªëng n∆∞·ªõc qu·∫ßy 10/5 s·∫Ω gi·∫£i nghi·ªáp.",
    "C√≥ qu√† M√≥c kh√≥a ‚Äì mang m√†n h√¨nh ƒë·∫øn qu·∫ßy 10/5.",
    "Gi·ªØ t√¢m tƒ©nh, u·ªëng n∆∞·ªõc m√°t l√† qua.",
    "May m·∫Øn tƒÉng m·∫°nh n·∫øu ·ªßng h·ªô qu·∫ßy 10/5."
  ][i%5]}`
}));

/* ===== AUDIO ENGINE ===== */
let ctx,gain,shaking=false,energy=0;
function audio(){
 if(!ctx){
  ctx=new (AudioContext||webkitAudioContext)();
  gain=ctx.createGain();gain.connect(ctx.destination);
 }
}
function clickS(){
 audio();
 let o=ctx.createOscillator(),g=ctx.createGain();
 o.frequency.value=1200;o.connect(g);g.connect(gain);
 g.gain.setValueAtTime(.2,ctx.currentTime);
 g.gain.exponentialRampToValueAtTime(.001,ctx.currentTime+.1);
 o.start();o.stop(ctx.currentTime+.12);
}
function shakeS(on){
 audio();
 if(on){
  shaking=true;
  noise=setInterval(()=>clickS(),120);
 }else{
  shaking=false;
  clearInterval(noise);
 }
}
function winS(){confetti({particleCount:150,spread:80})}
function sadS(){clickS()}

/* ===== UI ===== */
const cards=document.getElementById("cards");
for(let i=0;i<9;i++){
 let c=document.createElement("div");
 c.className="card";
 c.style.transform=`rotate(${(i-4)*8}deg)`;
 c.textContent="QU·∫∫";
 cards.appendChild(c);
}

/* ===== FLOW ===== */
startBtn.onclick=()=>{
 clickS();
 m1.style.display="flex";
}
function nextModal(){
 clickS();
 m1.style.display="none";
 m2.style.display="flex";
}
function unlock(){
 clickS();
 audio();
 ctx.resume();
 m2.style.display="none";
 shakeBtn.disabled=false;
 drawBtn.disabled=false;

 let old=localStorage.getItem(STORAGE);
 if(old){show(JSON.parse(old),true)}
}
shakeBtn.onclick=()=>{
 clickS();
 navigator.vibrate?.(40);
 shakeS(!shaking);
 energy=Math.min(100,energy+20);
 energyFill.style.width=energy+"%";
}
drawBtn.onclick=()=>{
 if(localStorage.getItem(STORAGE))return;
 clickS();shakeS(false);
 let d=dob.value;
 let r;
 if(d===VIP){
  r={vip:true,title:"Thi·∫øu gia VIP 10/5",
     text:"H√†o quang r·ª±c r·ª°! ƒê·∫øn qu·∫ßy 10/5 nh·∫≠n qu√† ƒë·∫∑c bi·ªát!"};
 }else{
  r=fortunes[Math.floor(Math.random()*fortunes.length)];
 }
 localStorage.setItem(STORAGE,JSON.stringify(r));
 show(r,false);
}

/* ===== SHOW RESULT ===== */
function show(r,old){
 result.innerHTML=`<b>${r.title}</b><br>${r.text}`;
 if(r.vip){
  result.classList.add("vip");
  winS();
 }else if(r.text.includes("M√≥c kh√≥a")){
  result.innerHTML+=`<div class="notice">üéÅ H√£y mang m√†n h√¨nh ƒë·∫øn qu·∫ßy 10/5 ƒë·ªÉ nh·∫≠n qu√†!</div>`;
  winS();
 }else{
  sadS();
 }
}
</script>
</body>
</html>

